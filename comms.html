<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Silent Beacon Communications</title>
  <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&display=swap" rel="stylesheet">
  <style>
    :root{ --green:#00ff6a; --green-dim:#00c251; --yellow:#ffd400; --bg:#000; }
    html,body{height:100%;}
    body{ margin:0; background:var(--bg); color:var(--green); font-family:"Courier New", Courier, monospace; overflow:hidden; }
    #matrix{ position:fixed; inset:0; z-index:-1; }
    .home-link{ position:fixed; top:18px; right:22px; z-index:5; color:var(--green); text-decoration:none; border:1px solid var(--green); padding:8px 12px; border-radius:6px; background:rgba(0,0,0,.35); box-shadow:0 0 8px rgba(0,255,106,.15), inset 0 0 6px rgba(0,255,106,.12);}
    .home-link:hover{ background:var(--green); color:#000; }
    .title-wrap{ position:fixed; top:32px; left:0; right:0; display:flex; justify-content:center; pointer-events:none; z-index:3;}
    .title{ font-family:inherit; font-weight:400; font-size:clamp(36px, 7.5vw, 78px); letter-spacing:.12em; text-transform:uppercase; transform:scaleX(1); display:inline-block; color:var(--green); text-shadow:0 0 6px rgba(0,255,106,.15); margin:0; user-select:none; }
    .center-cta{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:2; }
    .btn-communicate{ appearance:none; border:2px solid var(--green); background:rgba(0,255,106,.06); color:var(--green); padding:16px 28px; font-size:clamp(16px,3.5vw,22px); letter-spacing:.12em; text-transform:uppercase; cursor:pointer; box-shadow:0 0 10px rgba(0,255,106,.25), inset 0 0 6px rgba(0,255,106,.18); transition:transform .15s ease, box-shadow .2s ease, background .2s ease, color .2s ease;}
    .btn-communicate:hover{ transform:translateY(-1px); background:rgba(0,255,106,.18); box-shadow:0 0 14px rgba(0,255,106,.38), inset 0 0 10px rgba(0,255,106,.26); }
    .comms-modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; padding:24px; z-index:4; }
    .comms-card{ width:min(880px,92vw); backdrop-filter:blur(2px); background:rgba(0,0,0,.55); border:2px solid var(--green); box-shadow:0 0 14px rgba(0,255,106,.28), inset 0 0 10px rgba(0,255,106,.18); border-radius:10px; padding:20px 18px; animation:fadeIn .24s ease both; }
    .legend{ font-size:14px; letter-spacing:.08em; color:var(--green); text-shadow:0 0 8px rgba(0,255,106,.35); margin:0 0 12px 2px; opacity:.9; }
    .grid{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    .row{ margin-top:12px; }
    label{ display:block; font-size:12px; letter-spacing:.08em; margin:0 0 6px 2px; color:var(--green-dim); }
    input,textarea{ width:100%; box-sizing:border-box; background:rgba(0,0,0,.55); border:1px solid var(--green-dim); color:var(--green); padding:10px 12px; font-family:inherit; outline:none; border-radius:6px; caret-color:var(--green); transition:border-color .15s ease, box-shadow .15s ease, background .15s ease;}
    input:focus,textarea:focus{ border-color:var(--green); box-shadow:0 0 8px rgba(0,255,106,.3); background:rgba(0,0,0,.6); }
    textarea{ min-height:180px; resize:vertical; }
    .actions{ display:flex; gap:12px; align-items:center; justify-content:flex-end; margin-top:16px; }
    .btn{ appearance:none; border:1px solid var(--green); background:transparent; color:var(--green); padding:10px 16px; font-size:14px; line-height:1; border-radius:6px; cursor:pointer; min-width:92px; text-align:center; transition:background .2s ease, color .2s ease, border-color .2s ease;}
    .btn:hover{ background:var(--green); color:#000; border-color:var(--green);}
    .btn:active, .btn:focus { background:var(--green); color:#000; border-color:var(--green); }
    .btn:disabled{ opacity:.6; cursor:not-allowed;}
    .confirm{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; pointer-events:none; z-index:4;}
    .confirm-text{ font-size:clamp(20px,5vw,44px); color:#bcd6ff; text-shadow:0 0 10px rgba(30,91,255,.8),0 0 22px rgba(30,91,255,.5),0 0 40px rgba(30,91,255,.25); letter-spacing:.06em; animation:fadeIn .18s ease both; }
    @keyframes fadeIn{ from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none} }
    @keyframes dissolve{ 0%{opacity:1; filter:none; transform:scale(1);} 60%{opacity:.3; filter:blur(2px); transform:scale(.996) translateY(2px);} 100%{opacity:0; filter:blur(3px); transform:scale(.992) translateY(8px);} }
    .is-dissolving{ animation:dissolve .55s ease forwards; }
    .hidden{ display:none !important; }
    @media (max-width:720px){ .grid{ grid-template-columns:1fr; } }
  </style>
</head>
<body>
  <canvas id="matrix" aria-hidden="true"></canvas>
  <a class="home-link" href="https://silentbeacon.neocities.org/" target="_self">Home</a>

  <div class="title-wrap" id="titleWrap"><h1 class="title">Silent Beacon Communications</h1></div>
  <div class="center-cta" id="centerCta"><button class="btn-communicate" id="openBtn">Communicate</button></div>

  <div class="comms-modal" id="commsModal">
    <form class="comms-card" id="commsForm"
      action="https://formspree.io/f/mpwlnnel"
      method="POST">
      <p class="legend">/ / TRANSMISSION CHANNEL • End 2 End Encryption Capabilities Pending / /</p>

      <div class="grid">
        <div class="row">
          <label for="callsign">Callsign</label>
          <input id="callsign" name="callsign" maxlength="120" placeholder="e.g., SENTRY-21" autocomplete="nickname" />
        </div>
        <div class="row">
          <label for="reply">Email (optional)</label>
          <input id="reply" name="reply" type="email" maxlength="200" placeholder="you@proton.me" autocomplete="email" />
        </div>
      </div>

      <div class="row">
        <label for="message">Narrative</label>
        <textarea id="message" name="message" placeholder="Type your communication..." required></textarea>
      </div>

      <!-- Honeypot -->
      <input type="text" name="_gotcha" style="display:none">

      <div class="actions">
        <button type="button" class="btn" id="cancelBtn">Cancel</button>
        <button type="reset" class="btn" id="clearBtn">Clear</button>
        <button type="submit" class="btn" id="sendBtn">Send</button>
      </div>
      <div id="status" aria-live="polite" style="margin-top:10px; font-size:12px; color:#9ad9b7;"></div>
    </form>
  </div>

  <div class="confirm" id="confirm"><div class="confirm-text">✔ Transmission Sent</div></div>

  <!-- Submit overlay (no preventDefault) -->
  <script>
    document.getElementById("commsForm").addEventListener("submit", () => {
      const c = document.getElementById("confirm");
      c.style.display = "flex";
      setTimeout(()=>{ c.style.display="none"; }, 1200);
    });
  </script>

  <!-- Matrix background + UI (unchanged; no custom send handler) -->
  <script>
    (function(){
      const canvas = document.getElementById('matrix');
      const ctx = canvas.getContext('2d');
      let W,H,COLS,FS; let dropsBack=[],speedBack=[]; let dropsFront=[],speedFront=[];
      const GLYPHS="アイウエオカキクケコサシスセソ...0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+-*/=<>()[]{}|\\!?:;.,#%@$&";
      const SPEED=0.15;
      function resize(){W=canvas.width=window.innerWidth;H=canvas.height=window.innerHeight;FS=Math.max(12,Math.min(24,Math.floor(W/58)));ctx.font=FS+"px monospace";COLS=Math.ceil(W/FS);
        dropsBack=new Array(COLS);speedBack=new Array(COLS);dropsFront=new Array(COLS);speedFront=new Array(COLS);
        for(let i=0;i<COLS;i++){dropsBack[i]=Math.floor(Math.random()*-60);speedBack[i]=(0.6+Math.random()*1.1)*SPEED;
          dropsFront[i]=Math.floor(Math.random()*-60);speedFront[i]=(1.4+Math.random()*1.8)*SPEED;}}
      window.addEventListener('resize',resize,{passive:true});resize();
      function drawLayer(drops,speeds,alpha){ctx.globalAlpha=alpha;for(let c=0;c<COLS;c++){const x=c*FS;const y=drops[c]*FS;const ch=GLYPHS.charAt((Math.random()*GLYPHS.length)|0);ctx.fillText(ch,x,y);drops[c]+=speeds[c];if(y>H+(Math.random()*360)){drops[c]=Math.floor(Math.random()*-50);speeds[c]=(alpha<0.9?(0.6+Math.random()*1.1):(1.4+Math.random()*1.8))*SPEED;}}ctx.globalAlpha=1;}
      function tick(){ctx.fillStyle="rgba(0,0,0,0.05)";ctx.fillRect(0,0,W,H);ctx.fillStyle="#00ff6a";drawLayer(dropsBack,speedBack,0.45);drawLayer(dropsFront,speedFront,0.95);requestAnimationFrame(tick);}requestAnimationFrame(tick);
    })();

    const titleWrap=document.getElementById('titleWrap');const centerCta=document.getElementById('centerCta');
    const openBtn=document.getElementById('openBtn');const modal=document.getElementById('commsModal');
    const form=document.getElementById('commsForm');const cancelBtn=document.getElementById('cancelBtn');
    const clearBtn=document.getElementById('clearBtn');const sendBtn=document.getElementById('sendBtn');
    const statusEl=document.getElementById('status');
    function showModal(){titleWrap.classList.add('is-dissolving');centerCta.classList.add('is-dissolving');
      setTimeout(()=>{titleWrap.classList.add('hidden');centerCta.classList.add('hidden');modal.style.display='flex';},560);}
    function dissolveModalThen(cb){form.classList.add('is-dissolving');setTimeout(()=>{modal.style.display='none';form.classList.remove('is-dissolving');if(typeof cb==='function')cb();},560);}
    function resetLauncher(){titleWrap.classList.remove('hidden','is-dissolving');centerCta.classList.remove('hidden','is-dissolving');}
    openBtn.addEventListener('click',showModal);
    cancelBtn.addEventListener('click',()=>dissolveModalThen(resetLauncher));
    clearBtn.addEventListener('click',()=>{statusEl.textContent='';});
    /* No custom submit handler here */
  </script>
</body>
</html>
